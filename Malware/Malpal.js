function loopWithDelay(delay) {
  try {
    request = fetch("http://localhost/keep-alive");
    request.header = "Connection", "keep-alive";
    console.log("xd");
  setTimeout(function () {
    loopWithDelay(delay);
  }, delay);
  }catch (err) {
    setTimeout(function () {
      loopWithDelay(delay);
    }, delay);
    // server went offline so try again
  }
}

try{
  loopWithDelay(10000); 
}
catch (err){
  loopWithDelay(10000);
}